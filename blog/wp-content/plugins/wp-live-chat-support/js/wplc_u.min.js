var wplc_is_chat_open=!1;jQuery(document).ready(function(){function e(r,c,s){"undefined"==typeof c&&(c=!1),"undefined"==typeof s&&(s=!1),r.first_run=c,r.short_poll=s,jQuery.ajax({url:wplc_ajaxurl,data:r,type:"POST",success:function(e){if(y=1500,e){if("0"===e)return window.console&&console.log("WP Live Chat Support Return Error"),void(h=!1);if(e=JSON.parse(e),r.wplc_name=e.wplc_name,r.wplc_email=e.wplc_email,r.action_2="",r.cid=e.cid,Cookies.set("wplc_cid",e.cid,{expires:1,path:"/"}),Cookies.set("wplc_name",e.wplc_name,{expires:1,path:"/"}),Cookies.set("wplc_email",e.wplc_email,{expires:1,path:"/"}),i=jQuery.trim(e.cid),o=e.status,Cookies.set("wplc_chat_status",null,{path:"/"}),Cookies.set("wplc_chat_status",o,{expires:1,path:"/"}),jQuery.event.trigger({type:"wplc_user_chat_loop",response:e}),r.status==e.status){if(5==r.status&&u===!0&&t!==!1&&t(r.cid,r.status),3==e.status&&null!=e.data&&(h=!0,"undefined"!=typeof niftyFormatParser?jQuery("#wplc_chatbox").append(niftyFormatParser(e.data.wplcStripSlashes())):jQuery("#wplc_chatbox").append(e.data.wplcStripSlashes()),e.data)){var a=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(a),"undefined"!=typeof wplc_enable_ding&&"1"===wplc_enable_ding&&new Audio(wplc_plugin_url+"/wp-live-chat-support/ding.mp3").play()}}else if(r.status=o,Cookies.set("wplc_chat_status",o,{expires:1,path:"/"}),0==e.status)jQuery("#wp-live-chat-3").hide(),jQuery("#wp-live-chat-react").show().empty().append("<center>"+e.data+"</center>");else if(8==e.status){h=!1,jQuery("#wp-live-chat-minimize").show(),document.getElementById("wplc_chatmsg").disabled=!0,jQuery("#wplc_chatbox").append("<em>"+e.data+"</em><br />");var a=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(a),jQuery.event.trigger({type:"wplc_end_chat"})}else if(11==parseInt(e.status))jQuery("#wp-live-chat").css({display:"none"}),h=!1;else if((3==parseInt(e.status)||10==parseInt(e.status))&&(h=!0,jQuery("#wplc_cid").val(i),3==parseInt(e.status)&&(l(0),(jQuery("#wp-live-chat").hasClass("wplc_left")===!0||jQuery("#wp-live-chat").hasClass("wplc_right")===!0)&&jQuery("#wp-live-chat").height("400px")),10==parseInt(e.status)&&(h=!0,l(0)),null!=e.data&&("undefined"!=typeof niftyFormatParser?jQuery("#wplc_chatbox").append(niftyFormatParser(e.data.wplcStripSlashes())):jQuery("#wplc_chatbox").append(e.data.wplcStripSlashes()),e.data))){var a=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(a)}}},error:function(e,t){y=5e3,404==e.status?(a("Error: Requested page not found. [404]"),h=!1):500==e.status?(a("Error: Internal Server Error [500]."),a("Retrying in 5 seconds..."),h=!0):"parsererror"===t?(a("Error: Requested JSON parse failed."),h=!1):"abort"===t?(a("Error: Ajax request aborted."),h=!1):(a("Error: Uncaught Error.\n"+e.responseText),a("Retrying in 5 seconds..."),h=!0)},complete:function(a){h&&setTimeout(function(){e(r,!1,!1)},y)},timeout:12e4})}function a(e){window.console&&console.log(e),jQuery("#wplc_chatbox").append("<small>"+e+"</small><br>");var a=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(a)}function t(e,a){9==o&&"yes"==s||"yes"!=s&&(wplc_dc=setTimeout(function(){var e=jQuery("#wp-live-chat"),a=jQuery(e).attr("wplc_animation");switch(a){case"none":jQuery(e).css("display","block");break;case"animation-1":jQuery(e).animate({marginBottom:"0px"},1e3);break;case"animation-2-bl":jQuery(e).animate({left:"100px"},1e3);break;case"animation-2-br":jQuery(e).animate({right:"100px"},1e3);break;case"animation-2-l":jQuery(e).animate({left:"0px"},1e3);break;case"animation-2-r":jQuery(e).animate({right:"0px"},1e3);break;case"animation-3":jQuery(e).fadeIn("slow");case"animation-4":jQuery(e).css("display","block");break;default:jQuery(e).css("display","block")}"1"===jQuery("#wp-live-chat").attr("wplc-auto-pop-up")&&l(0),jQuery.event.trigger({type:"wplc_animation_done"})},parseInt(window.wplc_delay))),t=!1}function l(e){if(jQuery.event.trigger({type:"wplc_open_chat_1"}),o=Cookies.get("wplc_chat_status"),3==parseInt(o)){jQuery.event.trigger({type:"wplc_open_chat_2",wplc_online:w}),Cookies.set("wplc_had_chat",!0,{path:"/"});var a={action:"wplc_user_maximize_chat",security:wplc_nonce,cid:i};jQuery.post(wplc_ajaxurl,a,function(e){})}else if(10==parseInt(o))jQuery("#wp-live-chat-minimize").trigger("click");else if(5==o||9==o||8==o){if(jQuery("#wp-live-chat-2").is(":visible")===!1&&jQuery("#wp-live-chat-4").is(":visible")===!1){jQuery("#wp-live-chat-2").show();var t=Cookies.get("wplc_name");"no email set"!==Cookies.get("wplc_email")&&t.indexOf("user")>=0&&(jQuery("#wplc_name").val(Cookies.get("wplc_name")),jQuery("#wplc_email").val(Cookies.get("wplc_email")))}}else if(2==o)jQuery("#wp-live-chat-3").show();else if(1==o){jQuery("#wp-live-chat-4").show(),jQuery("#wplc_social_holder").show(),jQuery("#nifty_ratings_holder").show(),jQuery.event.trigger({type:"wplc_animation_done"}),jQuery("#wplc_chatbox").append("The chat has been ended by the operator.<br />");var l=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(l),jQuery("#wp-live-chat-minimize").hide(),document.getElementById("wplc_chatmsg").disabled=!0}}function r(e){return e=e.replace(/<br>/gi,"\n"),e=e.replace(/<p.*>/gi,"\n"),e=e.replace(/<a.*href="(.*?)".*>(.*?)<\/a>/gi," $2 ($1) "),e=e.replace(/<(?:.|\s)*?>/g,""),e=e.replace("iframe",""),e=e.replace("src",""),e=e.replace("href",""),e=e.replace("<",""),e=e.replace(">","")}function c(e,a){"undefined"!=typeof o.length&&o.length>0&&((10===parseInt(o)||7===parseInt(o))&&Cookies.set("wplc_chat_status",3,{expires:1,path:"/"}),0===parseInt(o)&&Cookies.set("wplc_chat_status",5,{expires:1,path:"/"}),8===parseInt(o)&&Cookies.set("wplc_chat_status",5,{expires:1,path:"/"})),a()}var i,s,p=(new Date).getTime(),o="",n="",_="",u=!0,i=null,w=!1,d={},y=1500;i=Cookies.get("wplc_cid"),i="undefined"==typeof i?null:Cookies.get("wplc_cid"),s=Cookies.get("wplc_hide"),wplc_check_minimize_cookie=Cookies.get("wplc_minimize"),o=Cookies.get("wplc_chat_status"),n=Cookies.get("wplc_name"),_=Cookies.get("wplc_email"),Cookies.set("wplc_chat_status",5,{expires:1,path:"/"}),o=5;var h=!0,m={action:"wplc_get_chat_box",security:wplc_nonce};if(jQuery.ajax({url:wplc_ajaxurl_site,data:m,type:"POST",success:function(a){if(a){if("0"===a)return window.console&&console.log("WP Live Chat Support Return Error"),void(h=!1);if(a=JSON.parse(a),jQuery("body").append(a.cbox),"undefined"==typeof l||"undefined"==typeof r)var l=jQuery(jQuery.parseHTML(a.cbox)).find("#wplc_name").val(),r=jQuery(jQuery.parseHTML(a.cbox)).find("#wplc_email").val();a.online===!1?(h=!1,w=!1):w=!0,("1"!==wplc_filter_run_override||w===!1)&&(h=!1);var c=!1;"undefined"==typeof wplc_is_mobile||"true"!==wplc_is_mobile&&wplc_is_mobile!==!0||(c=!0);var s={action:"wplc_call_to_server_visitor",security:wplc_nonce,cid:i,wplc_name:l,wplc_email:r,status:o,wplcsession:p,wplc_is_mobile:c,wplc_extra_data:wplc_extra_data};d=s,"1"!==wplc_filter_run_override||w===!1?e(s,!0,!0):e(s,!0,!1),null!==i&&1==u&&t!==!1&&t(i,o)}}}),jQuery("#wp-live-chat [placeholder]").focus(function(){var e=jQuery(this);e.val()==e.attr("placeholder")&&(e.val(""),e.removeClass("placeholder"))}).blur(function(){var e=jQuery(this);(""==e.val()||e.val()==e.attr("placeholder"))&&(e.addClass("placeholder"),e.val(e.attr("placeholder")))}).blur(),jQuery("body").on("click","#wp-live-chat-minimize",function(){if(jQuery.event.trigger({type:"wplc_minimize_chat"}),Cookies.set("wplc_minimize","yes",{expires:1,path:"/"}),o=Cookies.get("wplc_chat_status"),5!=o&&10!=o&&9!=o&&8!=o){var e={action:"wplc_user_minimize_chat",security:wplc_nonce,cid:i};jQuery.post(wplc_ajaxurl,e,function(e){})}}),jQuery("body").on("click","#wp-live-chat-close",function(){if(jQuery("#wp-live-chat").hide(),jQuery("#wp-live-chat-1").hide(),jQuery("#wp-live-chat-2").hide(),jQuery("#wp-live-chat-3").hide(),jQuery("#wp-live-chat-4").hide(),jQuery("#wplc_social_holder").hide(),jQuery("#nifty_ratings_holder").hide(),jQuery("#wp-live-chat-react").hide(),jQuery("#wp-live-chat-minimize").hide(),"undefined"!=typeof wplc_hide_chat&&""!==wplc_hide_chat&&null!==wplc_hide_chat)Cookies.set("wplc_hide",wplc_hide_chat,{expires:1,path:"/"});else{var e=new Date,a=2;e.setTime(e.getTime()+60*a*1e3),Cookies.set("wplc_hide","yes",{expires:e,path:"/"})}var t={action:"wplc_user_close_chat",security:wplc_nonce,cid:i,status:o};jQuery.post(wplc_ajaxurl,t,function(e){})}),jQuery("body").on("click",".wp-live-chat-now",function(){l(0)}),jQuery("body").on("click","#wplc_start_chat_btn",function(){var a=jQuery("#wplc_name").val(),t=jQuery("#wplc_email").val();if(a.length<=0)return alert("Please enter your name"),!1;if(t.length<=0)return alert("Please enter your email address"),!1;if("1"!==jQuery("#wplc_email").attr("wplc_hide")){var l=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!l.test(t))return alert("Please Enter a Valid Email Address"),!1}h=!0,"1"===wplc_filter_run_override||w===!1||(d.status=2,e(d,!1,!1)),jQuery.event.trigger({type:"wplc_start_chat"});var r=new Date;if(r.setTime(r.getTime()+12e4),i=Cookies.get("wplc_cid"),"undefined"!=typeof i&&null!==i)var c={action:"wplc_start_chat",security:wplc_nonce,name:a,email:t,cid:i,wplcsession:p,wplc_extra_data:wplc_extra_data};else var c={action:"wplc_start_chat",security:wplc_nonce,name:a,email:t,wplcsession:p,wplc_extra_data:wplc_extra_data};jQuery.post(wplc_ajaxurl,c,function(e){Cookies.set("wplc_chat_status",2,{expires:r,path:"/"}),Cookies.set("wplc_name",a,{path:"/"}),Cookies.set("wplc_email",t,{path:"/"}),i=jQuery.trim(e)})}),jQuery("body").on("click","#wplc_na_msg_btn",function(){var e=jQuery("#wplc_name").val(),a=jQuery("#wplc_email").val(),t=jQuery("#wplc_message").val(),l=jQuery("#wplc_domain_offline").val(),r=jQuery("#wplc_ip_address").val();if(e.length<=0)return alert("Please enter your name"),!1;if(a.length<=0)return alert("Please enter your email address"),!1;var c=/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i;if(!c.test(a))return alert("Please Enter a Valid Email Address"),!1;if(t.length<=0)return alert("Please enter a message"),!1;jQuery("#wp-live-chat-2-info").hide(),jQuery("#wplc_message_div").html(wplc_offline_msg),i=Cookies.get("wplc_cid");var s={action:"wplc_user_send_offline_message",security:wplc_nonce,cid:i,name:e,email:a,msg:t,ip:r,domain:l,wplc_extra_data:wplc_extra_data};jQuery.post(wplc_ajaxurl_site,s,function(e){jQuery("#wplc_message_div").html(wplc_offline_msg3)})}),jQuery("body").on("keyup","#wplc_chatmsg",function(e){13===e.keyCode&&jQuery("#wplc_send_msg").trigger("click")}),jQuery("body").on("click","#wplc_send_msg",function(){var e=jQuery("#wplc_cid").val(),a=r(document.getElementById("wplc_chatmsg").value),t=jQuery("#wplc_name").val();("undefined"==typeof t||null==t||""==t)&&(t=Cookies.get("wplc_name"));var l=jQuery("#wplc_email").val();("undefined"==typeof l||null==l||""==l)&&(l=Cookies.get("wplc_email")),jQuery("#wplc_chatmsg").val("");var c=a;"undefined"!=typeof niftyFormatParser&&(c=niftyFormatParser(c)),"display"==wplc_display_name?wplc_gravatar_image.length>1?jQuery("#wplc_chatbox").append("<span class='wplc-user-message wplc-color-bg-1 wplc-color-2 wplc-color-border-1'>"+wplc_gravatar_image+" <strong>"+t+"</strong>: "+c+"</span><br /><div class='wplc-clear-float-message'></div>"):jQuery("#wplc_chatbox").append("<span class='wplc-user-message wplc-color-bg-1 wplc-color-2 wplc-color-border-1'><img src='//www.gravatar.com/avatar/"+md5(l)+"?s=30' class='wplc-user-message-avatar' /> <strong>"+t+"</strong>: "+c+"</span><br /><div class='wplc-clear-float-message'></div>"):jQuery("#wplc_chatbox").append("<span class='wplc-user-message wplc-color-bg-1 wplc-color-2 wplc-color-border-1'>"+c+"</span><div class='wplc-clear-float-message'></div>");var i=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(i);var s={action:"wplc_user_send_msg",security:wplc_nonce,cid:e,msg:a,wplc_extra_data:wplc_extra_data};jQuery.post(wplc_ajaxurl,s,function(e){})}),jQuery(document).on("wplc_open_chat",function(e){o=Cookies.get("wplc_chat_status");c(status,function(){l()})}),String.prototype.wplcStripSlashes=function(){return this.replace(/\\(.)/gm,"$1")},"undefined"!=typeof wplc_elem_trigger_id&&""!==wplc_elem_trigger_id){var g=0,f=0;"undefined"!=typeof wplc_elem_trigger_action&&""!==wplc_elem_trigger_action&&(g=parseInt(wplc_elem_trigger_action)),"undefined"!=typeof wplc_elem_trigger_type&&""!==wplc_elem_trigger_type&&(f=parseInt(wplc_elem_trigger_type)),jQuery((1===f?"#":".")+wplc_elem_trigger_id).on(1===g?"mouseenter":"click",function(){l(0)})}});